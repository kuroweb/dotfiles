# コーディング前の学習

新しいコードを書く前に既存の実装を分析する。既存のコードベースこそがプロジェクト規約のドキュメントである。

## 基本原則

**このプロジェクトで類似のコードがどのように書かれているかを理解せずにコードを書いてはならない。**

AIは一般的なベストプラクティスに従った「教科書的に正しい」コードを書く傾向があるが、プロジェクト固有のパターンを無視しがちである。このルールは必須の分析フェーズを強制する。

## 必須ワークフロー

### 1. 類似コードの特定

何かを実装する前に、以下の条件を満たす既存のコードを見つける：
- **同じレイヤー**：リポジトリを追加するなら、他のリポジトリを見つける
- **同じ種類**：サービスを追加するなら、他のサービスを見つける
- **同じドメイン**：認証周りで作業するなら、他の認証コードを見つける
- **同じパターン**：APIエンドポイントを追加するなら、他のエンドポイントを見つける

### 2. プロジェクトパターンの抽出

2〜3個の類似実装を分析する：

| 観点 | 確認事項 |
|------|----------|
| 構造 | インターフェース + クラス？クラスのみ？関数型？ |
| 命名 | プレフィックス/サフィックス規約、ケーシングスタイル |
| 依存関係 | 依存性はどのように注入されるか？ |
| エラー処理 | 例外？Result型？エラーコード？ |
| テスト | テストファイルの場所、命名、パターン |
| インポート | 絶対パス？相対パス？ |

### 3. パターンに従って実装

分析完了後にのみ、特定したパターンに正確に一致するコードを書く。

## 禁止事項

| やってはいけないこと | 代わりにやるべきこと |
|----------------------|----------------------|
| プロジェクトが直接クラスを使用しているのにインターフェースを追加 | 既存パターンに合わせる |
| プロジェクトが手動DIを使用しているのにDIフレームワークを使用 | 手動のコンストラクタインジェクションを使用 |
| プロジェクトがシンプルなthrowを使用しているのに包括的なエラー処理を追加 | 既存のエラースタイルに合わせる |
| プロジェクトにコメントがないのにJSDocを追加 | 既存のドキュメントスタイルに従う |

## チェックリスト

新しいコードを書く前に：

1. **検索**: 2〜3個の類似する既存実装を見つける
2. **読む**: その構造、パターン、規約を学ぶ
3. **抽出**: プロジェクト固有のパターンを把握
4. **一致**: 新しいコードが特定したパターンに正確に従うようにする
